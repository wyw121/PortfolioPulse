(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{4167:(e,t,a)=>{Promise.resolve().then(a.bind(a,3918)),Promise.resolve().then(a.bind(a,65)),Promise.resolve().then(a.bind(a,3856))},3918:(e,t,a)=>{"use strict";a.d(t,{BlogPostMeta:()=>i});var r=a(7437),s=a(4693),l=a(2022),o=a(4241),n=a(5733),c=a(6717);function i(e){let{post:t}=e,a=e=>new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),i=e=>new Date(e).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"});return(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-6 leading-tight",children:t.title}),t.excerpt&&(0,r.jsx)("p",{className:"text-lg text-muted-foreground mb-6 leading-relaxed",children:t.excerpt}),t.cover_image&&(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("img",{src:t.cover_image,alt:t.title,className:"w-full max-h-96 object-cover rounded-lg shadow-sm"})}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-6 text-sm text-muted-foreground mb-8 pb-6 border-b",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"PortfolioPulse"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[a(t.published_at||t.created_at)," ",i(t.published_at||t.created_at)]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[t.view_count," 次浏览"]})]}),t.category&&(0,r.jsx)(s.C,{variant:"secondary",children:t.category}),t.is_featured&&(0,r.jsx)(s.C,{className:"bg-yellow-500 hover:bg-yellow-600",children:"精选文章"})]}),t.tags.length>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-8",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4 text-muted-foreground"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags.map(e=>(0,r.jsx)(s.C,{variant:"outline",className:"text-xs",children:e},e))})]}),t.updated_at!==t.created_at&&(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mb-8",children:["最后更新于 ",a(t.updated_at)," ",i(t.updated_at)]})]})}},65:(e,t,a)=>{"use strict";a.d(t,{BlogPost:()=>o});var r=a(7437),s=a(8059),l=a.n(s);function o(e){let{post:t}=e;return(0,r.jsxs)("div",{className:"jsx-70877169e50f6c2a prose prose-lg max-w-none dark:prose-invert",children:[t.content.includes("<html>")||t.content.includes("<!DOCTYPE")?(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:t.content},className:"jsx-70877169e50f6c2a blog-html-content"}):(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:t.content},className:"jsx-70877169e50f6c2a blog-markdown-content"}),(0,r.jsx)(l(),{id:"70877169e50f6c2a",children:".blog-html-content{}.blog-html-content table{@apply border-collapse border border-gray-300;}.blog-html-content td,.blog-html-content th{@apply border border-gray-300 px-4 py-2;}.blog-html-content img{@apply max-w-full h-auto rounded-lg shadow-sm;}.blog-html-content blockquote{@apply border-l-4 border-primary pl-4 italic;}.blog-html-content code{@apply bg-muted px-2 py-1 rounded text-sm;}.blog-html-content pre{@apply bg-muted p-4 rounded-lg overflow-x-auto;}.blog-html-content h1,.blog-html-content h2,.blog-html-content h3,.blog-html-content h4,.blog-html-content h5,.blog-html-content h6{@apply font-bold mt-8 mb-4;}.blog-html-content h1{@apply text-3xl;}.blog-html-content h2{@apply text-2xl;}.blog-html-content h3{@apply text-xl;}.blog-html-content h4{@apply text-lg;}.blog-html-content h5{@apply text-base;}.blog-html-content h6{@apply text-sm;}.blog-html-content p{@apply mb-4 leading-7;}.blog-html-content ul,.blog-html-content ol{@apply mb-4 pl-6;}.blog-html-content li{@apply mb-2;}.blog-html-content a{@apply text-primary hover:underline;}.blog-html-content .onenote-table{@apply w-full border-collapse;}.blog-html-content .onenote-highlight{@apply bg-yellow-200 dark:bg-yellow-800;}.blog-html-content .onenote-note{@apply bg-blue-50 dark:bg-blue-900 border-l-4 border-blue-400 p-4 my-4;}"})]})}},3856:(e,t,a)=>{"use strict";a.d(t,{RelatedPosts:()=>i});var r=a(7437),s=a(4693),l=a(6013),o=a(9088),n=a(7138),c=a(2265);function i(e){let{currentSlug:t,category:a}=e,[i,d]=(0,c.useState)([]),[h,m]=(0,c.useState)(!0);(0,c.useEffect)(()=>{g()},[t,a]);let g=async()=>{try{let e=[];if(a&&(e=(e=await o.Z.getPosts({category:a,page_size:6})).filter(e=>e.slug!==t)),e.length<3){let a=(await o.Z.getPosts({page_size:8})).filter(a=>a.slug!==t&&!e.some(e=>e.slug===a.slug)).slice(0,3-e.length);e=[...e,...a]}d(e.slice(0,3))}catch(e){}finally{m(!1)}},p=e=>new Date(e).toLocaleDateString("zh-CN",{month:"short",day:"numeric"});return h?(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-6",children:"相关文章"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)("div",{className:"h-5 bg-muted rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-4 bg-muted rounded w-3/4 animate-pulse"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-3 bg-muted rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-3 bg-muted rounded w-5/6 animate-pulse"})]})})]},t))})]}):0===i.length?null:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-6",children:"相关文章"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i.map(e=>(0,r.jsxs)(l.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{className:"text-base",children:(0,r.jsx)(n.default,{href:"/blog/".concat(e.slug),className:"hover:text-primary transition-colors line-clamp-2",children:e.title})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,r.jsx)("span",{children:p(e.published_at||e.created_at)}),e.category&&(0,r.jsx)(s.C,{variant:"outline",className:"text-xs",children:e.category})]})]}),e.excerpt&&(0,r.jsx)(l.aY,{children:(0,r.jsx)(l.SZ,{className:"text-sm line-clamp-2",children:e.excerpt})})]},e.id))})]})}},4693:(e,t,a)=>{"use strict";a.d(t,{C:()=>n});var r=a(7437),s=a(7440),l=a(3027);a(2265);let o=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...l}=e;return(0,r.jsx)("div",{className:(0,s.cn)(o({variant:a}),t),...l})}},6013:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>n,SZ:()=>i,Zb:()=>o,aY:()=>d,ll:()=>c});var r=a(7437),s=a(2265),l=a(7440);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});o.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});n.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});c.displayName="CardTitle";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});i.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},9088:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});let r=a(357).env.NEXT_PUBLIC_API_URL||"http://localhost:8000",s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new AbortController,r=setTimeout(()=>a.abort(),3e3);try{let s=await fetch(e,{...t,signal:a.signal});return clearTimeout(r),s}catch(e){if(clearTimeout(r),e instanceof Error&&"AbortError"===e.name)throw Error("请求超时");throw e}};class l{static async getPosts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;e.page&&t.set("page",e.page.toString()),e.page_size&&t.set("page_size",e.page_size.toString()),e.category&&t.set("category",e.category),e.search&&t.set("search",e.search);let a=await s("".concat(r,"/api/blog/posts?").concat(t),{cache:"force-cache",next:{revalidate:300}});if(!a.ok)throw Error("获取博客文章失败");return await a.json()}static async getPostBySlug(e){try{let t=await s("".concat(r,"/api/blog/posts/").concat(e),{cache:"force-cache",next:{revalidate:600}});if(!t.ok)return null;return await t.json()}catch(e){return null}}static async getFeaturedPosts(){let e=await s("".concat(r,"/api/blog/featured"),{cache:"force-cache",next:{revalidate:300}});if(!e.ok)throw Error("获取精选文章失败");return await e.json()}static async getCategories(){let e=await fetch("".concat(r,"/api/blog/categories"),{cache:"no-store"});if(!e.ok)throw Error("获取博客分类失败");return await e.json()}static async getAllPostsAdmin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;e.page&&t.set("page",e.page.toString()),e.page_size&&t.set("page_size",e.page_size.toString());let a=await fetch("".concat(r,"/api/admin/blog/posts?").concat(t),{cache:"no-store",headers:this.getAuthHeaders()});if(!a.ok)throw Error("获取所有文章失败");return await a.json()}static async createPost(e){let t=await fetch("".concat(r,"/api/admin/blog/posts"),{method:"POST",headers:{"Content-Type":"application/json",...this.getAuthHeaders()},body:JSON.stringify(e)});if(!t.ok)throw Error("创建文章失败");return await t.json()}static async updatePost(e,t){let a=await fetch("".concat(r,"/api/admin/blog/posts/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",...this.getAuthHeaders()},body:JSON.stringify(t)});if(!a.ok)throw Error("更新文章失败");return await a.json()}static async deletePost(e){if(!(await fetch("".concat(r,"/api/admin/blog/posts/").concat(e),{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw Error("删除文章失败")}static async uploadFile(e){let t=new FormData;t.append("file",e);let a=await fetch("".concat(r,"/api/admin/blog/upload"),{method:"POST",headers:this.getAuthHeaders(),body:t});if(!a.ok)throw Error("文件上传失败");return await a.json()}static getAuthHeaders(){return{}}}},7440:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(4839),s=a(6164);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[138,289,438,130,215,744],()=>t(4167)),_N_E=e.O()}]);