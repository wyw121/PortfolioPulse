# PortfolioPulse å†…å®¹ç®¡ç†ç­–ç•¥æ–‡æ¡£

*åŸºäºæ–‡ä»¶çš„æ··åˆæ¶æ„å†…å®¹ç®¡ç†æ–¹æ¡ˆ*

---

## ğŸ“– æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº† PortfolioPulse é¡¹ç›®é‡‡ç”¨çš„æ··åˆå†…å®¹ç®¡ç†æ¶æ„ï¼Œç»“åˆäº†**åŸºäºæ–‡ä»¶çš„é™æ€å†…å®¹ç®¡ç†**å’Œ**æ•°æ®åº“é©±åŠ¨çš„åŠ¨æ€åŠŸèƒ½**ï¼Œæ—¢ä¿è¯äº†å†…å®¹ç®¡ç†çš„å®‰å…¨æ€§å’Œä¾¿åˆ©æ€§ï¼Œåˆä¿ç•™äº†ç‹¬ç‰¹çš„è¯„è®ºå’Œç¤¾äº¤äº’åŠ¨ç³»ç»Ÿã€‚

## ğŸ¯ è®¾è®¡ç†å¿µ

### æ ¸å¿ƒåŸåˆ™
- **å®‰å…¨ä¼˜å…ˆ**: é™æ€å†…å®¹æ— åå°æš´éœ²ï¼Œé¿å…ä¼ ç»Ÿ CMS å®‰å…¨é£é™©
- **ä¾¿åˆ©æ›´æ–°**: é€šè¿‡ Git å·¥ä½œæµè¿›è¡Œå†…å®¹ç®¡ç†
- **åŠŸèƒ½ä¿ç•™**: ç»´æŒç°æœ‰çš„è¯„è®ºç³»ç»Ÿå’Œè®¿å®¢æƒé™ä½“ç³»
- **ç‰ˆæœ¬æ§åˆ¶**: æ‰€æœ‰å†…å®¹å˜æ›´éƒ½æœ‰å®Œæ•´çš„å†å²è®°å½•

### æ¶æ„åˆ†å·¥
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å†…å®¹ç±»å‹      â”‚    å­˜å‚¨æ–¹å¼      â”‚    ç®¡ç†æ–¹å¼     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åšå®¢æ–‡ç«         â”‚ Markdown æ–‡ä»¶    â”‚ Git + ç¼–è¾‘å™¨    â”‚
â”‚ é¡¹ç›®ä¿¡æ¯        â”‚ Markdown æ–‡ä»¶    â”‚ Git + ç¼–è¾‘å™¨    â”‚
â”‚ é™æ€é¡µé¢        â”‚ Markdown æ–‡ä»¶    â”‚ Git + ç¼–è¾‘å™¨    â”‚
â”‚ è¯„è®ºäº’åŠ¨        â”‚ MySQL æ•°æ®åº“     â”‚ ç°æœ‰ API æ¥å£   â”‚
â”‚ è®¿å®¢æƒé™        â”‚ MySQL æ•°æ®åº“     â”‚ ç°æœ‰æƒé™ç³»ç»Ÿ    â”‚
â”‚ ç»Ÿè®¡æ•°æ®        â”‚ MySQL æ•°æ®åº“     â”‚ è‡ªåŠ¨é‡‡é›†        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„è®¾è®¡

### æ¨èçš„å†…å®¹ç›®å½•ç»“æ„
```
content/
â”œâ”€â”€ blog/                    # åšå®¢æ–‡ç« 
â”‚   â”œâ”€â”€ 2024/               # æŒ‰å¹´ä»½ç»„ç»‡
â”‚   â”‚   â”œâ”€â”€ 08/            # æŒ‰æœˆä»½ç»„ç»‡
â”‚   â”‚   â”‚   â”œâ”€â”€ 2024-08-20-rust-async-programming.md
â”‚   â”‚   â”‚   â”œâ”€â”€ 2024-08-15-portfolio-design-thoughts.md
â”‚   â”‚   â”‚   â””â”€â”€ 2024-08-10-finance-learning-notes.md
â”‚   â”‚   â””â”€â”€ 09/
â”‚   â””â”€â”€ 2025/
â”œâ”€â”€ projects/               # é¡¹ç›®ä¿¡æ¯
â”‚   â”œâ”€â”€ portfolio-pulse.md
â”‚   â”œâ”€â”€ trading-system.md
â”‚   â”œâ”€â”€ github-analyzer.md
â”‚   â””â”€â”€ archived/          # å·²å½’æ¡£é¡¹ç›®
â”œâ”€â”€ pages/                  # é™æ€é¡µé¢
â”‚   â”œâ”€â”€ about.md
â”‚   â”œâ”€â”€ contact.md
â”‚   â””â”€â”€ privacy-policy.md
â”œâ”€â”€ assets/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ blog/
â”‚   â”‚   â”‚   â”œâ”€â”€ 2024-08-20/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rust-async-1.png
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ rust-async-2.png
â”‚   â”‚   â””â”€â”€ projects/
â”‚   â”‚       â”œâ”€â”€ portfolio-pulse/
â”‚   â”‚       â”‚   â”œâ”€â”€ screenshot-1.png
â”‚   â”‚       â”‚   â””â”€â”€ architecture.png
â”‚   â””â”€â”€ documents/
â””â”€â”€ config/                 # ç½‘ç«™é…ç½®
    â”œâ”€â”€ site.yaml
    â”œâ”€â”€ navigation.yaml
    â””â”€â”€ categories.yaml
```

### æ–‡ä»¶å‘½åè§„èŒƒ
```bash
# åšå®¢æ–‡ç« å‘½å
YYYY-MM-DD-title-slug.md
ç¤ºä¾‹: 2024-08-20-rust-async-programming.md

# é¡¹ç›®æ–‡ä»¶å‘½å
project-name.md
ç¤ºä¾‹: portfolio-pulse.md

# é™æ€é¡µé¢å‘½å
page-name.md
ç¤ºä¾‹: about.md

# å›¾ç‰‡èµ„æºå‘½å
YYYY-MM-DD-description-number.ext
ç¤ºä¾‹: 2024-08-20-rust-async-1.png
```

---

## ğŸ“ å†…å®¹æ ¼å¼è§„èŒƒ

### åšå®¢æ–‡ç« æ ¼å¼
```markdown
---
title: "æ–‡ç« æ ‡é¢˜"
slug: "url-friendly-slug"
date: "2024-08-20"
category: "æŠ€æœ¯åˆ†äº«"  # å¯é€‰: æŠ€æœ¯åˆ†äº«ã€é‡‘èå­¦ä¹ ã€ç”Ÿæ´»æ„Ÿæ‚Ÿã€å­¦ä¹ ç¬”è®°
tags: ["Rust", "å¼‚æ­¥ç¼–ç¨‹", "åç«¯å¼€å‘"]
excerpt: "æ–‡ç« æ‘˜è¦ï¼Œç”¨äºåˆ—è¡¨é¡µæ˜¾ç¤ºå’Œ SEO"
featured: true  # æ˜¯å¦ä¸ºç²¾é€‰æ–‡ç« 
status: "published"  # draft | published | archived
cover_image: "/assets/images/blog/2024-08-20/cover.jpg"
author: "Your Name"  # å¯é€‰
reading_time: 5  # é¢„ä¼°é˜…è¯»æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰ï¼Œå¯é€‰
---

# æ–‡ç« æ ‡é¢˜

## å¼•è¨€
æ–‡ç« å¼€å¤´éƒ¨åˆ†...

## ä¸»è¦å†…å®¹
è¯¦ç»†å†…å®¹...

### å­æ ‡é¢˜
å­å†…å®¹...

## ä»£ç ç¤ºä¾‹
```rust
async fn example() {
    println!("Hello, async world!");
}
```

## æ€»ç»“
æ–‡ç« æ€»ç»“...

---

*å‘å¸ƒäº 2024å¹´8æœˆ20æ—¥*
```

### é¡¹ç›®ä¿¡æ¯æ ¼å¼
```markdown
---
title: "é¡¹ç›®åç§°"
description: "é¡¹ç›®ç®€çŸ­æè¿°"
tech_stack: ["Rust", "Next.js", "MySQL", "TypeScript"]
status: "active"  # active | completed | paused | archived
github_url: "https://github.com/username/repo"
demo_url: "https://demo.example.com"
start_date: "2024-07-01"
end_date: null  # é¡¹ç›®å®Œæˆæ—¥æœŸï¼Œè¿›è¡Œä¸­åˆ™ä¸º null
featured: true
priority: 1  # æ˜¾ç¤ºä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜
category: "Web åº”ç”¨"  # é¡¹ç›®åˆ†ç±»
contributors: ["Your Name"]
license: "MIT"
stars: 0  # GitHub starsï¼Œå¯è‡ªåŠ¨æ›´æ–°
forks: 0  # GitHub forksï¼Œå¯è‡ªåŠ¨æ›´æ–°
---

# é¡¹ç›®åç§°

## é¡¹ç›®èƒŒæ™¯
é¡¹ç›®çš„åˆ›å»ºèƒŒæ™¯å’ŒåŠ¨æœº...

## æŠ€æœ¯æ¶æ„
è¯¦ç»†çš„æŠ€æœ¯é€‰å‹å’Œæ¶æ„è¯´æ˜...

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Next.js 15
- **è¯­è¨€**: TypeScript
- **æ ·å¼**: Tailwind CSS + shadcn/ui
- **çŠ¶æ€ç®¡ç†**: Zustand

### åç«¯æŠ€æœ¯æ ˆ
- **è¯­è¨€**: Rust
- **æ¡†æ¶**: Axum
- **æ•°æ®åº“**: MySQL 8.0
- **ORM**: SQLx

## æ ¸å¿ƒåŠŸèƒ½
1. **åŠŸèƒ½ä¸€**: åŠŸèƒ½æè¿°
2. **åŠŸèƒ½äºŒ**: åŠŸèƒ½æè¿°
3. **åŠŸèƒ½ä¸‰**: åŠŸèƒ½æè¿°

## æŠ€æœ¯äº®ç‚¹
- äº®ç‚¹ä¸€
- äº®ç‚¹äºŒ
- äº®ç‚¹ä¸‰

## å¼€å‘å¿ƒå¾—
åœ¨å¼€å‘è¿‡ç¨‹ä¸­çš„å­¦ä¹ å’Œæ„Ÿæ‚Ÿ...

## éƒ¨ç½²è¯´æ˜
é¡¹ç›®çš„éƒ¨ç½²æ–¹å¼å’Œé…ç½®...

## æœªæ¥è®¡åˆ’
- [ ] è®¡åˆ’åŠŸèƒ½ä¸€
- [ ] è®¡åˆ’åŠŸèƒ½äºŒ
- [ ] è®¡åˆ’åŠŸèƒ½ä¸‰
```

### é™æ€é¡µé¢æ ¼å¼
```markdown
---
title: "é¡µé¢æ ‡é¢˜"
description: "é¡µé¢æè¿°"
layout: "simple"  # é¡µé¢å¸ƒå±€ç±»å‹
last_updated: "2024-08-20"
---

# é¡µé¢æ ‡é¢˜

é¡µé¢å†…å®¹...
```

---

## ğŸ”„ æ—¥å¸¸å†…å®¹æ›´æ–°å·¥ä½œæµç¨‹

### æ–¹å¼ä¸€ï¼šæœ¬åœ°ç¼–è¾‘ + Git æ¨é€ï¼ˆæ¨èï¼‰

#### åˆ›å»ºæ–°åšå®¢æ–‡ç« 
```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /d/repositories/PortfolioPulse

# 2. ç¡®ä¿åœ¨æœ€æ–°åˆ†æ”¯
git pull origin main

# 3. åˆ›å»ºæ–°æ–‡ç« 
mkdir -p content/blog/2024/08
cd content/blog/2024/08

# 4. åˆ›å»ºæ–‡ç« æ–‡ä»¶
touch 2024-08-20-new-article.md

# 5. ä½¿ç”¨ç¼–è¾‘å™¨ç¼–å†™å†…å®¹
code 2024-08-20-new-article.md  # VS Code
# æˆ–è€…
typora 2024-08-20-new-article.md  # Typora
```

#### ç¼–å†™å’Œé¢„è§ˆå†…å®¹
```bash
# 1. åœ¨ç¼–è¾‘å™¨ä¸­ç¼–å†™ Markdown å†…å®¹
# 2. æœ¬åœ°å¯åŠ¨å¼€å‘æœåŠ¡å™¨é¢„è§ˆæ•ˆæœ
npm run dev  # å‰ç«¯å¼€å‘æœåŠ¡å™¨

# 3. æ£€æŸ¥å†…å®¹æ˜¾ç¤ºæ•ˆæœ
# è®¿é—® http://localhost:3000/blog/new-article
```

#### æäº¤å’Œå‘å¸ƒ
```bash
# 1. æ·»åŠ æ–‡ä»¶åˆ° Git
git add content/blog/2024/08/2024-08-20-new-article.md

# 2. å¦‚æœæœ‰é…å›¾ï¼Œä¹Ÿè¦æ·»åŠ 
git add content/assets/images/blog/2024-08-20/

# 3. æäº¤æ›´æ”¹
git commit -m "æ·»åŠ åšå®¢ï¼šæ–‡ç« æ ‡é¢˜

- è¯¦ç»†æè¿°æ–‡ç« å†…å®¹
- æ¶‰åŠçš„æŠ€æœ¯ç‚¹
- å…¶ä»–è¯´æ˜"

# 4. æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main

# 5. è‡ªåŠ¨éƒ¨ç½²
# GitHub Actions ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°å†…å®¹å˜æ›´å¹¶é‡æ–°æ„å»ºéƒ¨ç½²
```

### æ–¹å¼äºŒï¼šåœ¨çº¿ç¼–è¾‘ï¼ˆGitHub ç½‘é¡µç‰ˆï¼‰

#### æ­¥éª¤è¯´æ˜
```bash
# 1. æ‰“å¼€ GitHub ä»“åº“
https://github.com/wyw121/PortfolioPulse

# 2. å¯¼èˆªåˆ°å†…å®¹ç›®å½•
ç‚¹å‡» content/blog/2024/08/

# 3. åˆ›å»ºæ–°æ–‡ä»¶
ç‚¹å‡» "Add file" â†’ "Create new file"

# 4. è¾“å…¥æ–‡ä»¶å
2024-08-20-github-actions-guide.md

# 5. åœ¨çº¿ç¼–å†™å†…å®¹
ä½¿ç”¨ GitHub çš„ Markdown ç¼–è¾‘å™¨

# 6. æäº¤æ–‡ä»¶
é¡µé¢åº•éƒ¨å¡«å†™ï¼š
- Commit title: "æ·»åŠ åšå®¢ï¼šGitHub Actions ä½¿ç”¨æŒ‡å—"
- Description: "è¯¦ç»†ä»‹ç»å¦‚ä½•é…ç½®å’Œä½¿ç”¨ GitHub Actions"
- é€‰æ‹© "Commit directly to the main branch"

# 7. è‡ªåŠ¨éƒ¨ç½²è§¦å‘
æäº¤åè‡ªåŠ¨è§¦å‘ GitHub Actions æ„å»º
```

### æ–¹å¼ä¸‰ï¼šç§»åŠ¨ç«¯æ›´æ–°

#### ä½¿ç”¨ GitHub ç§»åŠ¨åº”ç”¨
```bash
# 1. å®‰è£… GitHub ç§»åŠ¨åº”ç”¨
# iOS: App Store æœç´¢ "GitHub"
# Android: Google Play æœç´¢ "GitHub"

# 2. ç™»å½•è´¦æˆ·å¹¶æ‰¾åˆ°ä»“åº“
# 3. æµè§ˆåˆ° content/blog/ ç›®å½•
# 4. ç‚¹å‡»å³ä¸Šè§’ "+" åˆ›å»ºæ–°æ–‡ä»¶
# 5. ç›´æ¥åœ¨æ‰‹æœºä¸Šç¼–å†™ Markdown
# 6. æäº¤æ›´æ”¹å¹¶è‡ªåŠ¨éƒ¨ç½²
```

#### ä½¿ç”¨åœ¨çº¿ Markdown ç¼–è¾‘å™¨
```bash
# æ¨èå·¥å…·ï¼š
# - Typora.io (åœ¨çº¿ç‰ˆ)
# - StackEdit.io
# - HackMD.io

# å·¥ä½œæµç¨‹ï¼š
# 1. åœ¨åœ¨çº¿ç¼–è¾‘å™¨ä¸­å†™ä½œ
# 2. å¯¼å‡ºä¸º Markdown æ–‡ä»¶
# 3. é€šè¿‡ GitHub ç½‘é¡µç‰ˆä¸Šä¼ 
# 4. æˆ–è€…å¤åˆ¶å†…å®¹åˆ° GitHub åœ¨çº¿ç¼–è¾‘å™¨
```

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### æ··åˆæ¶æ„è®¾è®¡

#### å†…å®¹è·å–ç­–ç•¥
```typescript
// å†…å®¹æºé…ç½®
interface ContentSource {
  // é™æ€å†…å®¹ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–
  staticContent: {
    blog: {
      source: 'filesystem';
      path: 'content/blog/**/*.md';
      cache: true;
      revalidate: 3600; // 1å°æ—¶ç¼“å­˜
    };
    projects: {
      source: 'filesystem';
      path: 'content/projects/*.md';
      cache: true;
      revalidate: 7200; // 2å°æ—¶ç¼“å­˜
    };
    pages: {
      source: 'filesystem';
      path: 'content/pages/*.md';
      cache: true;
      revalidate: 86400; // 24å°æ—¶ç¼“å­˜
    };
  };

  // åŠ¨æ€æ•°æ®ä»æ•°æ®åº“è·å–
  dynamicData: {
    comments: {
      source: 'database';
      table: 'comments';
      cache: false;
    };
    visitor_sessions: {
      source: 'database';
      table: 'visitor_sessions';
      cache: false;
    };
    interaction_stats: {
      source: 'database';
      table: 'interaction_stats';
      cache: true;
      revalidate: 300; // 5åˆ†é’Ÿç¼“å­˜
    };
  };

  // å¤–éƒ¨æ•°æ®ä» API è·å–
  externalData: {
    github_stats: {
      source: 'api';
      endpoint: 'https://api.github.com/repos/{owner}/{repo}';
      cache: true;
      revalidate: 1800; // 30åˆ†é’Ÿç¼“å­˜
    };
  };
}
```

#### æ„å»ºæ—¶å†…å®¹å¤„ç†
```rust
// backend/src/content/processor.rs
use std::fs;
use std::path::Path;
use serde::{Deserialize, Serialize};
use matter::Matter;
use pulldown_cmark::{Parser, html};

#[derive(Debug, Serialize, Deserialize)]
pub struct BlogFrontmatter {
    pub title: String,
    pub slug: String,
    pub date: String,
    pub category: Option<String>,
    pub tags: Vec<String>,
    pub excerpt: Option<String>,
    pub featured: Option<bool>,
    pub status: String,
    pub cover_image: Option<String>,
}

#[derive(Debug, Serialize)]
pub struct ProcessedBlogPost {
    pub frontmatter: BlogFrontmatter,
    pub content: String,
    pub html: String,
    pub reading_time: u32,
    pub word_count: u32,
}

pub struct ContentProcessor;

impl ContentProcessor {
    pub async fn process_blog_posts() -> Result<Vec<ProcessedBlogPost>, Box<dyn std::error::Error>> {
        let blog_dir = Path::new("content/blog");
        let mut posts = Vec::new();

        if blog_dir.exists() {
            for entry in fs::read_dir(blog_dir)? {
                let entry = entry?;
                let path = entry.path();

                if path.extension().and_then(|s| s.to_str()) == Some("md") {
                    if let Ok(post) = Self::process_single_post(&path).await {
                        posts.push(post);
                    }
                }
            }
        }

        // æŒ‰æ—¥æœŸæ’åº
        posts.sort_by(|a, b| b.frontmatter.date.cmp(&a.frontmatter.date));

        Ok(posts)
    }

    async fn process_single_post(path: &Path) -> Result<ProcessedBlogPost, Box<dyn std::error::Error>> {
        let content = fs::read_to_string(path)?;
        let matter = Matter::<matter::YAML>::new();
        let result = matter.parse(&content);

        let frontmatter: BlogFrontmatter = result.data
            .ok_or("Missing frontmatter")?
            .deserialize()?;

        let markdown_content = result.content;

        // è½¬æ¢ Markdown ä¸º HTML
        let parser = Parser::new(&markdown_content);
        let mut html_output = String::new();
        html::push_html(&mut html_output, parser);

        // è®¡ç®—é˜…è¯»æ—¶é—´ï¼ˆå‡è®¾æ¯åˆ†é’Ÿé˜…è¯»200å­—ï¼‰
        let word_count = markdown_content.split_whitespace().count() as u32;
        let reading_time = (word_count / 200).max(1);

        Ok(ProcessedBlogPost {
            frontmatter,
            content: markdown_content,
            html: html_output,
            reading_time,
            word_count,
        })
    }

    pub async fn sync_to_database(posts: &[ProcessedBlogPost]) -> Result<(), Box<dyn std::error::Error>> {
        // å°†æ–‡ä»¶å†…å®¹åŒæ­¥åˆ°æ•°æ®åº“ï¼ˆä»…å…ƒæ•°æ®ï¼Œä¿ç•™è¯„è®ºç­‰ï¼‰
        for post in posts {
            // æ£€æŸ¥æ•°æ®åº“ä¸­æ˜¯å¦å·²å­˜åœ¨
            // å¦‚æœå­˜åœ¨ï¼Œæ›´æ–°å…ƒæ•°æ®ä½†ä¿ç•™è¯„è®ºã€ç‚¹èµç­‰
            // å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°è®°å½•
            Self::upsert_blog_metadata(post).await?;
        }
        Ok(())
    }

    async fn upsert_blog_metadata(post: &ProcessedBlogPost) -> Result<(), Box<dyn std::error::Error>> {
        // å®ç°æ•°æ®åº“æ›´æ–°é€»è¾‘
        // ä¿ç•™ç°æœ‰çš„è¯„è®ºã€è®¿å®¢äº’åŠ¨ç­‰æ•°æ®
        Ok(())
    }
}
```

#### å‰ç«¯å†…å®¹åŠ è½½
```typescript
// frontend/lib/content-loader.ts
import fs from 'fs/promises';
import path from 'path';
import matter from 'gray-matter';
import { remark } from 'remark';
import remarkHtml from 'remark-html';

export interface BlogPost {
  slug: string;
  title: string;
  date: string;
  category?: string;
  tags: string[];
  excerpt?: string;
  featured?: boolean;
  status: string;
  coverImage?: string;
  content: string;
  html: string;
  readingTime: number;
  wordCount: number;
}

export class ContentLoader {
  private static contentDir = path.join(process.cwd(), 'content');

  static async getBlogPosts(): Promise<BlogPost[]> {
    const blogDir = path.join(this.contentDir, 'blog');
    const files = await this.getAllMarkdownFiles(blogDir);

    const posts = await Promise.all(
      files.map(async (filename) => {
        const filePath = path.join(blogDir, filename);
        const fileContents = await fs.readFile(filePath, 'utf8');
        const { data, content } = matter(fileContents);

        // è½¬æ¢ Markdown ä¸º HTML
        const processedContent = await remark()
          .use(remarkHtml)
          .process(content);

        const html = processedContent.toString();

        // è®¡ç®—é˜…è¯»æ—¶é—´
        const wordCount = content.split(/\s+/).length;
        const readingTime = Math.ceil(wordCount / 200);

        return {
          slug: path.basename(filename, '.md'),
          title: data.title,
          date: data.date,
          category: data.category,
          tags: data.tags || [],
          excerpt: data.excerpt,
          featured: data.featured || false,
          status: data.status || 'draft',
          coverImage: data.cover_image,
          content,
          html,
          readingTime,
          wordCount,
        };
      })
    );

    // è¿‡æ»¤å·²å‘å¸ƒçš„æ–‡ç« å¹¶æŒ‰æ—¥æœŸæ’åº
    return posts
      .filter(post => post.status === 'published')
      .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());
  }

  static async getBlogPost(slug: string): Promise<BlogPost | null> {
    try {
      const blogDir = path.join(this.contentDir, 'blog');
      const filePath = path.join(blogDir, `${slug}.md`);
      const fileContents = await fs.readFile(filePath, 'utf8');

      const { data, content } = matter(fileContents);

      const processedContent = await remark()
        .use(remarkHtml)
        .process(content);

      const html = processedContent.toString();
      const wordCount = content.split(/\s+/).length;
      const readingTime = Math.ceil(wordCount / 200);

      return {
        slug,
        title: data.title,
        date: data.date,
        category: data.category,
        tags: data.tags || [],
        excerpt: data.excerpt,
        featured: data.featured || false,
        status: data.status || 'draft',
        coverImage: data.cover_image,
        content,
        html,
        readingTime,
        wordCount,
      };
    } catch (error) {
      return null;
    }
  }

  private static async getAllMarkdownFiles(dir: string): Promise<string[]> {
    try {
      const files = await fs.readdir(dir);
      return files.filter(file => file.endsWith('.md'));
    } catch (error) {
      return [];
    }
  }
}
```

---

## ğŸš€ è‡ªåŠ¨åŒ–éƒ¨ç½²é…ç½®

### GitHub Actions å·¥ä½œæµ
```yaml
# .github/workflows/content-deploy.yml
name: Content Deployment

on:
  push:
    branches: [ main ]
    paths:
      - 'content/**'
      - 'frontend/**'
      - 'backend/**'
  pull_request:
    branches: [ main ]
    paths: [ 'content/**' ]

jobs:
  content-validation:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
          cache-dependency-path: frontend/package-lock.json

      - name: Install dependencies
        run: |
          cd frontend
          npm ci

      - name: Validate Markdown files
        run: |
          cd frontend
          npm run validate-content

      - name: Check frontmatter format
        run: |
          cd frontend
          npm run check-frontmatter

      - name: Build static content
        run: |
          cd frontend
          npm run build-content

  deploy:
    needs: content-validation
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Setup Rust
        uses: actions-rs/toolchain@v1
        with:
          toolchain: stable
          override: true

      - name: Build backend
        run: |
          cd backend
          cargo build --release

      - name: Process content files
        run: |
          cd backend
          cargo run --bin content-processor

      - name: Build frontend
        run: |
          cd frontend
          npm ci
          npm run build

      - name: Deploy to server
        run: |
          # éƒ¨ç½²è„šæœ¬
          echo "Deploying to production server..."
          # å®é™…éƒ¨ç½²å‘½ä»¤
```

### å†…å®¹éªŒè¯è„šæœ¬
```javascript
// scripts/validate-content.js
const fs = require('fs/promises');
const path = require('path');
const matter = require('gray-matter');

class ContentValidator {
  static async validateAllContent() {
    console.log('ğŸ” å¼€å§‹éªŒè¯å†…å®¹æ–‡ä»¶...');

    try {
      await this.validateBlogPosts();
      await this.validateProjects();
      await this.validateAssets();

      console.log('âœ… æ‰€æœ‰å†…å®¹æ–‡ä»¶éªŒè¯é€šè¿‡');
    } catch (error) {
      console.error('âŒ å†…å®¹éªŒè¯å¤±è´¥:', error.message);
      process.exit(1);
    }
  }

  static async validateBlogPosts() {
    const blogDir = path.join(__dirname, '../content/blog');
    const files = await this.getAllMarkdownFiles(blogDir);

    for (const file of files) {
      const filePath = path.join(blogDir, file);
      const content = await fs.readFile(filePath, 'utf8');

      try {
        const { data } = matter(content);

        // éªŒè¯å¿…éœ€å­—æ®µ
        this.validateRequired(data, ['title', 'date', 'status'], file);

        // éªŒè¯æ—¥æœŸæ ¼å¼
        if (!/^\d{4}-\d{2}-\d{2}$/.test(data.date)) {
          throw new Error(`æ— æ•ˆçš„æ—¥æœŸæ ¼å¼: ${data.date}`);
        }

        // éªŒè¯çŠ¶æ€å€¼
        if (!['draft', 'published', 'archived'].includes(data.status)) {
          throw new Error(`æ— æ•ˆçš„çŠ¶æ€å€¼: ${data.status}`);
        }

        // éªŒè¯æ–‡ä»¶åæ ¼å¼
        if (!/^\d{4}-\d{2}-\d{2}-.+\.md$/.test(file)) {
          throw new Error(`æ–‡ä»¶åæ ¼å¼ä¸æ­£ç¡®: ${file}`);
        }

        console.log(`âœ“ ${file}`);
      } catch (error) {
        throw new Error(`æ–‡ä»¶ ${file} éªŒè¯å¤±è´¥: ${error.message}`);
      }
    }
  }

  static async validateProjects() {
    const projectsDir = path.join(__dirname, '../content/projects');
    const files = await this.getAllMarkdownFiles(projectsDir);

    for (const file of files) {
      const filePath = path.join(projectsDir, file);
      const content = await fs.readFile(filePath, 'utf8');

      try {
        const { data } = matter(content);

        // éªŒè¯å¿…éœ€å­—æ®µ
        this.validateRequired(data, ['title', 'description', 'status'], file);

        // éªŒè¯çŠ¶æ€å€¼
        if (!['active', 'completed', 'paused', 'archived'].includes(data.status)) {
          throw new Error(`æ— æ•ˆçš„é¡¹ç›®çŠ¶æ€: ${data.status}`);
        }

        console.log(`âœ“ ${file}`);
      } catch (error) {
        throw new Error(`é¡¹ç›®æ–‡ä»¶ ${file} éªŒè¯å¤±è´¥: ${error.message}`);
      }
    }
  }

  static async validateAssets() {
    // éªŒè¯å›¾ç‰‡æ–‡ä»¶æ˜¯å¦å­˜åœ¨
    const blogDir = path.join(__dirname, '../content/blog');
    const files = await this.getAllMarkdownFiles(blogDir);

    for (const file of files) {
      const filePath = path.join(blogDir, file);
      const content = await fs.readFile(filePath, 'utf8');
      const { data, content: markdownContent } = matter(content);

      // æ£€æŸ¥å°é¢å›¾ç‰‡
      if (data.cover_image) {
        const imagePath = path.join(__dirname, '../content', data.cover_image);
        try {
          await fs.access(imagePath);
        } catch {
          console.warn(`âš ï¸  è­¦å‘Š: å°é¢å›¾ç‰‡ä¸å­˜åœ¨ ${data.cover_image} (${file})`);
        }
      }

      // æ£€æŸ¥å†…å®¹ä¸­çš„å›¾ç‰‡å¼•ç”¨
      const imageRegex = /!\[.*?\]\((.+?)\)/g;
      let match;
      while ((match = imageRegex.exec(markdownContent)) !== null) {
        const imageSrc = match[1];
        if (imageSrc.startsWith('/assets/')) {
          const imagePath = path.join(__dirname, '../content', imageSrc);
          try {
            await fs.access(imagePath);
          } catch {
            console.warn(`âš ï¸  è­¦å‘Š: å›¾ç‰‡ä¸å­˜åœ¨ ${imageSrc} (${file})`);
          }
        }
      }
    }
  }

  static validateRequired(data, fields, filename) {
    for (const field of fields) {
      if (!data[field]) {
        throw new Error(`ç¼ºå°‘å¿…éœ€å­—æ®µ: ${field} (${filename})`);
      }
    }
  }

  static async getAllMarkdownFiles(dir) {
    try {
      const files = await fs.readdir(dir, { recursive: true });
      return files.filter(file => file.endsWith('.md'));
    } catch {
      return [];
    }
  }
}

// è¿è¡ŒéªŒè¯
if (require.main === module) {
  ContentValidator.validateAllContent();
}

module.exports = ContentValidator;
```

---

## ğŸ“Š å†…å®¹è¿ç§»è®¡åˆ’

### é˜¶æ®µ 1ï¼šåŸºç¡€è®¾æ–½æ­å»ºï¼ˆ1-2å‘¨ï¼‰

#### ä»»åŠ¡æ¸…å•
- [ ] åˆ›å»º `content/` ç›®å½•ç»“æ„
- [ ] é…ç½® Markdown å¤„ç†ç®¡é“
- [ ] å®ç°å†…å®¹éªŒè¯è„šæœ¬
- [ ] è®¾ç½® GitHub Actions è‡ªåŠ¨åŒ–
- [ ] å»ºç«‹æ–‡ä»¶åˆ°æ•°æ®åº“çš„åŒæ­¥æœºåˆ¶

#### æŠ€æœ¯è¦ç‚¹
- ä¿æŒç°æœ‰æ•°æ®åº“è¡¨ç»“æ„ä¸å˜
- æ–°å¢å†…å®¹åŒæ­¥æœåŠ¡
- å®ç° Markdown è§£æå’Œå¤„ç†
- å»ºç«‹å†…å®¹ç¼“å­˜æœºåˆ¶

### é˜¶æ®µ 2ï¼šå†…å®¹æ ¼å¼åŒ–ï¼ˆ2-3å‘¨ï¼‰

#### è¿ç§»ç°æœ‰å†…å®¹
```bash
# 1. å¯¼å‡ºç°æœ‰åšå®¢æ–‡ç« 
# ä»æ•°æ®åº“å¯¼å‡ºä¸º Markdown æ ¼å¼
cargo run --bin export-blog-to-markdown

# 2. æ‰‹åŠ¨æ•´ç†å’Œä¼˜åŒ–å†…å®¹
# æ·»åŠ åˆé€‚çš„ frontmatter
# ä¼˜åŒ– Markdown æ ¼å¼
# æ•´ç†å›¾ç‰‡èµ„æº

# 3. éªŒè¯è¿ç§»ç»“æœ
npm run validate-content
```

#### æ–°å†…å®¹åˆ›å»ºæµç¨‹
- ä½¿ç”¨æ–°çš„ Markdown å·¥ä½œæµåˆ›å»ºå†…å®¹
- é€æ­¥ç†Ÿæ‚‰ Git å·¥ä½œæµç¨‹
- å»ºç«‹å†…å®¹æ¨¡æ¿å’Œè§„èŒƒ

### é˜¶æ®µ 3ï¼šå…¨é¢åˆ‡æ¢ï¼ˆ1å‘¨ï¼‰

#### æœ€ç»ˆåˆ‡æ¢
- [ ] ç¦ç”¨æ—§çš„å†…å®¹ç®¡ç†ç•Œé¢
- [ ] å¯ç”¨æ–°çš„æ–‡ä»¶é©±åŠ¨ç³»ç»Ÿ
- [ ] ç›‘æ§ç³»ç»Ÿç¨³å®šæ€§
- [ ] ä¼˜åŒ–æ€§èƒ½å’Œç¼“å­˜

#### å›æ»šè®¡åˆ’
- ä¿ç•™æ•°æ®åº“å¤‡ä»½
- å‡†å¤‡å¿«é€Ÿå›æ»šè„šæœ¬
- ç›‘æ§é”™è¯¯æ—¥å¿—

---

## ğŸ”§ å·¥å…·å’Œç¼–è¾‘å™¨æ¨è

### æœ¬åœ°ç¼–è¾‘å™¨
```bash
# 1. VS Codeï¼ˆæ¨èï¼‰
# å®‰è£…æ‰©å±•ï¼š
# - Markdown All in One
# - Markdown Preview Enhanced
# - Front Matter CMS
# - GitLens

# 2. Typora
# æ‰€è§å³æ‰€å¾—çš„ Markdown ç¼–è¾‘å™¨
# é€‚åˆä¸“æ³¨å†™ä½œ

# 3. Obsidian
# å¦‚æœä½ å·²ç»ç”¨ Obsidian ç®¡ç†ç¬”è®°
# å¯ä»¥ç›´æ¥åœ¨å…¶ä¸­ç¼–å†™åšå®¢å†…å®¹

# 4. Zed Editor
# æ–°å…´çš„å¿«é€Ÿç¼–è¾‘å™¨
# å¯¹ Markdown æ”¯æŒè‰¯å¥½
```

### åœ¨çº¿ç¼–è¾‘å·¥å…·
```bash
# 1. GitHub Web Editor
# ç›´æ¥åœ¨ GitHub ç½‘é¡µä¸Šç¼–è¾‘
# æ”¯æŒå®æ—¶é¢„è§ˆ

# 2. Gitpod
# äº‘ç«¯ IDE
# å®Œæ•´çš„å¼€å‘ç¯å¢ƒ

# 3. CodeSandbox
# åœ¨çº¿ä»£ç ç¼–è¾‘
# é€‚åˆå¿«é€Ÿä¿®æ”¹

# 4. StackEdit
# ä¸“ä¸šçš„åœ¨çº¿ Markdown ç¼–è¾‘å™¨
# æ”¯æŒåŒæ­¥åˆ° GitHub
```

### ç§»åŠ¨ç«¯å·¥å…·
```bash
# 1. GitHub Mobile App
# å®˜æ–¹ç§»åŠ¨åº”ç”¨
# æ”¯æŒæ–‡ä»¶ç¼–è¾‘å’Œæäº¤

# 2. Working Copy (iOS)
# åŠŸèƒ½å¼ºå¤§çš„ Git å®¢æˆ·ç«¯
# æ”¯æŒ Markdown ç¼–è¾‘

# 3. MGit (Android)
# Android Git å®¢æˆ·ç«¯
# åŸºç¡€çš„æ–‡ä»¶ç¼–è¾‘åŠŸèƒ½

# 4. Termux (Android)
# ç»ˆç«¯æ¨¡æ‹Ÿå™¨
# å¯ä»¥è¿è¡Œå®Œæ•´çš„ Git å‘½ä»¤
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### å†…å®¹ç¼“å­˜æœºåˆ¶
```typescript
// å¤šå±‚ç¼“å­˜ç­–ç•¥
interface CacheStrategy {
  // 1. å†…å­˜ç¼“å­˜ï¼ˆæœ€å¿«ï¼‰
  memory: {
    ttl: 300; // 5åˆ†é’Ÿ
    maxSize: 100; // æœ€å¤šç¼“å­˜100ç¯‡æ–‡ç« 
  };

  // 2. Redis ç¼“å­˜ï¼ˆä¸­ç­‰é€Ÿåº¦ï¼‰
  redis: {
    ttl: 3600; // 1å°æ—¶
    keyPrefix: 'content:';
  };

  // 3. æ–‡ä»¶ç¼“å­˜ï¼ˆè¾ƒæ…¢ä½†æŒä¹…ï¼‰
  file: {
    ttl: 86400; // 24å°æ—¶
    directory: './cache/content/';
  };
}
```

### é™æ€èµ„æºä¼˜åŒ–
```bash
# å›¾ç‰‡ä¼˜åŒ–
# 1. è‡ªåŠ¨å‹ç¼©
npm install sharp
# æ„å»ºæ—¶è‡ªåŠ¨å‹ç¼©å›¾ç‰‡

# 2. WebP æ ¼å¼æ”¯æŒ
# ä¸ºç°ä»£æµè§ˆå™¨æä¾› WebP æ ¼å¼

# 3. æ‡’åŠ è½½
# å®ç°å›¾ç‰‡æ‡’åŠ è½½ï¼Œæå‡é¡µé¢æ€§èƒ½

# 4. CDN åˆ†å‘
# å°†é™æ€èµ„æºä¸Šä¼ åˆ° CDN
```

### SEO ä¼˜åŒ–
```typescript
// è‡ªåŠ¨ç”Ÿæˆ SEO å…ƒæ•°æ®
interface SEOMetadata {
  title: string;
  description: string;
  keywords: string[];
  author: string;
  publishDate: string;
  modifiedDate: string;
  canonicalUrl: string;
  socialImages: {
    twitter: string;
    facebook: string;
  };
}

// ä» Markdown frontmatter è‡ªåŠ¨ç”Ÿæˆ
// ç¡®ä¿æ¯ç¯‡æ–‡ç« éƒ½æœ‰å®Œæ•´çš„ SEO ä¿¡æ¯
```

---

## ğŸ”’ å®‰å…¨æ€§è€ƒè™‘

### å†…å®¹å®‰å…¨
```bash
# 1. è¾“å…¥éªŒè¯
# éªŒè¯ Markdown å†…å®¹ï¼Œé˜²æ­¢ XSS æ”»å‡»
# è¿‡æ»¤å±é™©çš„ HTML æ ‡ç­¾

# 2. æ–‡ä»¶æƒé™
# ç¡®ä¿å†…å®¹æ–‡ä»¶æœ‰æ­£ç¡®çš„æƒé™è®¾ç½®
chmod 644 content/**/*.md

# 3. Git é’©å­
# è®¾ç½® pre-commit é’©å­éªŒè¯å†…å®¹
# é˜²æ­¢æ•æ„Ÿä¿¡æ¯æ„å¤–æäº¤
```

### è®¿é—®æ§åˆ¶
```typescript
// ä¿æŒç°æœ‰çš„è®¿å®¢æƒé™ç³»ç»Ÿ
// é™æ€å†…å®¹ + åŠ¨æ€æƒé™çš„ç»“åˆ
interface ContentSecurity {
  // é™æ€å†…å®¹å®‰å…¨ï¼ˆæ— åå°æš´éœ²ï¼‰
  staticContent: {
    noAdminInterface: true;
    gitWorkflowOnly: true;
    versionControlled: true;
  };

  // åŠ¨æ€åŠŸèƒ½å®‰å…¨ï¼ˆä¿æŒç°æœ‰ç³»ç»Ÿï¼‰
  dynamicFeatures: {
    visitorAuthentication: true;
    commentModeration: true;
    trustScoreSystem: true;
  };
}
```

---

## ğŸ“‹ ç»´æŠ¤å’Œç›‘æ§

### å®šæœŸç»´æŠ¤ä»»åŠ¡
```bash
# æ¯å‘¨ä»»åŠ¡
- [ ] æ£€æŸ¥å›¾ç‰‡èµ„æºæ˜¯å¦æ­£å¸¸
- [ ] éªŒè¯å¤–éƒ¨é“¾æ¥æœ‰æ•ˆæ€§
- [ ] æ¸…ç†è¿‡æœŸçš„ç¼“å­˜æ–‡ä»¶
- [ ] å¤‡ä»½å†…å®¹æ–‡ä»¶

# æ¯æœˆä»»åŠ¡
- [ ] åˆ†æå†…å®¹æ€§èƒ½æ•°æ®
- [ ] ä¼˜åŒ–çƒ­é—¨æ–‡ç« çš„åŠ è½½é€Ÿåº¦
- [ ] æ›´æ–°ä¾èµ–åŒ…ç‰ˆæœ¬
- [ ] æ£€æŸ¥ SEO è¡¨ç°

# æ¯å­£åº¦ä»»åŠ¡
- [ ] å…¨é¢çš„å†…å®¹å®¡æ ¸
- [ ] æŠ€æœ¯æ¶æ„è¯„ä¼°
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†å’Œåˆ†æ
- [ ] åŠŸèƒ½è§„åˆ’å’Œè·¯çº¿å›¾æ›´æ–°
```

### ç›‘æ§æŒ‡æ ‡
```typescript
interface ContentMetrics {
  // æ€§èƒ½æŒ‡æ ‡
  performance: {
    averageLoadTime: number;
    cacheHitRate: number;
    buildTime: number;
    deploymentFrequency: number;
  };

  // å†…å®¹æŒ‡æ ‡
  content: {
    totalPosts: number;
    publishedThisMonth: number;
    averageReadingTime: number;
    popularCategories: string[];
  };

  // ç”¨æˆ·æŒ‡æ ‡
  engagement: {
    pageViews: number;
    uniqueVisitors: number;
    commentCount: number;
    shareCount: number;
  };
}
```

---

## ğŸ‰ æ€»ç»“

è¿™å¥—æ··åˆå†…å®¹ç®¡ç†ç­–ç•¥ä¸º PortfolioPulse é¡¹ç›®æä¾›äº†ï¼š

### âœ… ä¼˜åŠ¿
- **å®‰å…¨æ€§**: æ— åå°ç®¡ç†ç•Œé¢ï¼Œé™ä½å®‰å…¨é£é™©
- **ä¾¿åˆ©æ€§**: åŸºäº Git çš„ç†Ÿæ‚‰å·¥ä½œæµç¨‹
- **çµæ´»æ€§**: ä¿ç•™ç°æœ‰çš„è¯„è®ºå’Œç¤¾äº¤åŠŸèƒ½
- **å¯æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°åŠŸèƒ½å’Œä¼˜åŒ–
- **ç‰ˆæœ¬æ§åˆ¶**: å®Œæ•´çš„å†…å®¹å˜æ›´å†å²
- **åä½œå‹å¥½**: æ”¯æŒå¤šäººåä½œå’Œ PR å®¡æ ¸

### ğŸ”„ å·¥ä½œæµç¨‹
1. ä½¿ç”¨ Markdown ç¼–å†™å†…å®¹
2. é€šè¿‡ Git æäº¤å’Œæ¨é€
3. è‡ªåŠ¨åŒ–éªŒè¯å’Œéƒ¨ç½²
4. ä¿æŒè¯„è®ºç³»ç»Ÿä¸å˜

### ğŸš€ æœªæ¥æ‰©å±•
- æ”¯æŒæ›´å¤šå†…å®¹ç±»å‹
- é›†æˆæ›´å¤šçš„è‡ªåŠ¨åŒ–å·¥å…·
- ä¼˜åŒ–ç§»åŠ¨ç«¯ç¼–è¾‘ä½“éªŒ
- å¢åŠ å†…å®¹åä½œåŠŸèƒ½

è¿™å¥—æ–¹æ¡ˆæ—¢æ»¡è¶³äº†å®‰å…¨å’Œä¾¿åˆ©çš„éœ€æ±‚ï¼Œåˆä¿æŒäº†é¡¹ç›®ç‹¬ç‰¹çš„ç¤¾äº¤äº’åŠ¨ç‰¹è‰²ã€‚éšç€ä½¿ç”¨ç»éªŒçš„ç§¯ç´¯ï¼Œå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–å’Œå®Œå–„æ•´ä¸ªå·¥ä½œæµç¨‹ã€‚

---

*æ–‡æ¡£æœ€åæ›´æ–°ï¼š2024å¹´8æœˆ20æ—¥*
*ç‰ˆæœ¬ï¼šv1.0*
